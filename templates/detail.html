<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<style>
    * {
    margin: 0;
    padding: 0;
    list-style: none;
}

/*루트*/
#root {
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background-image: url("https://cdn.pixabay.com/photo/2016/04/12/22/35/watercolour-1325656__480.jpg");
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
}

/*메인페이지 버튼*/
#mainPageBtn {
    position:relative;
    bottom:430px;
    right: 105px;

    width: 100px;
    height: 30px;
    border-radius: 5px;
    border:none;
    background-color:white;

}

/*컨텐츠 박스*/
#content-box {
    width: 1000px;
    height: 800px;
    background-color: rgba(0,0,0,0.3);

    display: flex;
    flex-direction: row;
    border-radius: 10px;
    padding: 0 20px 0 20px;

}

/*이미지 박스*/
#img-box {
    width:50%;
    height:100%;
    /*background-color: salmon;*/
    display: flex;
    align-items: center;
    justify-content: center;
}

/*이미지 박스안의 이미지*/
#img-box > img {
    width:90%;
    height:90%;
    border-radius: 10px;

}

/*인풋 박스*/
#input-box {
    width:50%;
    height:100%;
    /*background-color: skyblue;*/

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/*인풋 박스안의 ul*/
#input-box ul {
    /*background-color: antiquewhite;*/
}

/*인풋 박스안의 인풋*/
#input-box input {
    width: 400px;
    height:100px;
    border-radius: 10px;
    border:none;
    margin: 10px 0 10px 0;
}

/*인풋 박스안의 특징 인풋*/
#input-box ul li:nth-child(4) input {
    height: 300px;
}

/*버튼 박스*/
#button-box {
    /*background-color: red;*/
    width:400px;
    display: flex;
    justify-content: flex-end;
    margin-top:10px;
}

/*버튼 박스안의 버튼*/
#button-box button {
    width: 100px;
    height: 30px;
    border-radius: 5px;
    border:none;
    background-color:white;
}

/*취소 버튼*/
#button-box button:nth-child(1) {
    margin-right: 10px;
}

</style>
    <script>
        function mainPage() {
            window.location.href = '/'
        }


        function deletePost() {
            let kind = $('#kind').val()
            let area = $('#area').val()
            let sex = $('#sex').val()
            let info = $('#info').val()

             $.ajax({
                type: 'POST',
                url: '/delete',
                data: {kind_give: kind, area_give: area, sex_give: sex, info_give: info},
                success: function (response) {
                    alert(response['msg'])
                    window.location.reload()
                }
            });
        }

        function editPost() {
            let url = window.location.href.split("/")
            let id = url[url.length - 1]
            $("#input-box").empty()
            $.ajax({
                type: 'GET',
                url: `/api/edit`,
                data: {"id_give": id},
                success: function (response) {
                    let animal_details = response["animal_details"];
                    let kind = animal_details["kind"]
                    let area = animal_details["area"]
                    let sex = animal_details["sex"]
                    let info = animal_details["info"]
                    console.log(animal_details, kind)
                    let html_temp = `<div id="input-box">
                                        <form>
                                            <input type="text" value="${kind}"/>
                                            <input type="text" value="${area}"/>
                                            <input type="text" value="${sex}"/>
                                            <input type="text" value="${info}"/>
                                        </form>
                                    </div>`
                    $("#input-box").append(html_temp)

                    {#window.location.reload()#}
                }
            });
        }
        function rePosting() {
            let url = window.location.href.split("/")
            let id = url[url.length - 1]
            let kind = $('#kind').val()
            let area = $('#area').val()
            let sex = $('#sex').val()
            let info = $('#info').val()

            $("#input-box").empty()
            $.ajax({
                type: 'POST',
                url: `/api/post`,
                data: {kind_give: kind, area_give: area, sex_give: sex, info_give: info, "id_give": id},
                success: function (response) {
                    let animal_details = response["animal_details"];
                    let kind = animal_details["kind"]
                    let area = animal_details["area"]
                    let sex = animal_details["sex"]
                    let info = animal_details["info"]
                    console.log(animal_details, kind)
                    let html_temp = `<div id="input-box">
                                        <form>
                                            품종 <input type="text" value="${kind}"/>
                                            지역 <input type="text" value="${area}"/>
                                            성별 <input type="text" value="${sex}"/>
                                            INFO <input type="text" value="${info}"/>
                                             <button onclick="rePosting()">등록</button>
                                        </form>
                                    </div>`
                    $("#input-box").append(html_temp)



                }
            });
        }


    </script>
</head>
<body>
    <div id="root">
        <div id="content-box">
            <div id="img-box">
{#                <img src="http://www.usjournal.kr/news/data/20220416/p1065605892282128_336_thum.jpg" alt="">#}
                <img src={{ clickAnimal['img'] }} alt="">
            </div>
            <div id="input-box">
                <ul>
                    {% if clickAnimal['notice'] %}
<li>{{ clickAnimal['notice'] }}</li>
{% else %}
<li>{{ clickAnimal['notice_num'] }}</li>
{% endif %}
<li>{{ clickAnimal['kind'] }}</li>
<li>{{ clickAnimal['area'] }}</li>
<li>{{ clickAnimal['sex'] }}</li>
                </ul>
                <div id="button-box">
                    <button onclick="editPost()">수정</button>
                    <button onclick="deletePost()">삭제</button>
                </div>
            </div>
        </div>
        <button onclick="mainPage()" id="mainPageBtn">
            메인페이지
        </button>
    </div>
</body>
</html>
